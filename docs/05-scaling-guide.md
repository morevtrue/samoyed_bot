# –≠–≤–æ–ª—é—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞: –æ—Ç MVP –∫ Production

## –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (MVP)

**–ú–µ—Ç—Ä–∏–∫–∏:**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: 1-50
- –ó–∞–ø—Ä–æ—Å–æ–≤ –≤ –¥–µ–Ω—å: <1000
- Uptime —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ: 95% (–¥–æ–ø—É—Å—Ç–∏–º—ã –ø—Ä–æ—Å—Ç–æ–∏)
- –ö–æ–º–∞–Ω–¥–∞: 1 —á–µ–ª–æ–≤–µ–∫

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:**
- JavaScript (vanilla)
- sql.js (SQLite –≤ –ø–∞–º—è—Ç–∏)
- Long polling (Telegraf)
- –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ (`npm start`)

---

## –°—Ü–µ–Ω–∞—Ä–∏–∏ —Ä–æ—Å—Ç–∞

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ú–∞–ª—ã–π —Ä–æ—Å—Ç (50-500 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)

**–ö–æ–≥–¥–∞:** –ù–∞–±—Ä–∞–ª–∏ –ø–µ—Ä–≤—É—é –±–∞–∑—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –Ω–æ –µ—â—ë –Ω–µ –≤–∏—Ä—É—Å–Ω—ã–π —Ä–æ—Å—Ç

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã:**
1. ‚úÖ **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å** ‚Üí PM2 –¥–ª—è –∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞
2. ‚úÖ **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** ‚Üí –±–∞–∑–æ–≤–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫
3. ‚ùå TypeScript ‚Üí —Ä–∞–Ω–æ, –∫–æ–¥ –µ—â—ë –∞–∫—Ç–∏–≤–Ω–æ –º–µ–Ω—è–µ—Ç—Å—è
4. ‚ùå PostgreSQL ‚Üí sql.js —Å–ø—Ä–∞–≤–∏—Ç—Å—è

**–î–µ–π—Å—Ç–≤–∏—è:**
```bash
# –î–æ–±–∞–≤–∏—Ç—å PM2
npm install -g pm2
pm2 start src/index.js --name samoyed-bot
pm2 startup  # –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ —Å–µ—Ä–≤–µ—Ä–∞
```

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
```javascript
// –ü—Ä–æ—Å—Ç–µ–π—à–∏–π –ª–æ–≥–≥–µ—Ä –≤ —Ñ–∞–π–ª
import fs from 'fs';
function log(level, message, meta) {
  const entry = `${new Date().toISOString()} [${level}] ${message} ${JSON.stringify(meta)}\n`;
  fs.appendFileSync('logs/bot.log', entry);
}
```

**–°—Ç–æ–∏–º–æ—Å—Ç—å:** ~1 –¥–µ–Ω—å —Ä–∞–±–æ—Ç—ã

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –°—Ä–µ–¥–Ω–∏–π —Ä–æ—Å—Ç (500-2000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)

**–ö–æ–≥–¥–∞:** –ë–æ—Ç –Ω–∞–±–∏—Ä–∞–µ—Ç –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å, –Ω–∞—á–∏–Ω–∞—é—Ç –≤–æ–∑–Ω–∏–∫–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã:**
1. ‚úÖ **PostgreSQL** ‚Üí sql.js –Ω–∞—á–∏–Ω–∞–µ—Ç —Ç–æ—Ä–º–æ–∑–∏—Ç—å
2. ‚úÖ **Webhooks** ‚Üí –≤–º–µ—Å—Ç–æ long polling (–º–µ–Ω—å—à–µ –Ω–∞–≥—Ä—É–∑–∫–∞)
3. ‚úÖ **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** ‚Üí Sentry –¥–ª—è –æ—Ç–ª–æ–≤–∞ –æ—à–∏–±–æ–∫
4. ü§î **TypeScript** ‚Üí –µ—Å–ª–∏ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç–µ —Ä–∞—Å—à–∏—Ä—è—Ç—å –∫–æ–º–∞–Ω–¥—É
5. ‚ùå Redis ‚Üí –ø–æ–∫–∞ –Ω–µ –Ω—É–∂–µ–Ω (–Ω–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è)

#### –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ PostgreSQL

**–ó–∞—á–µ–º:**
- sql.js –∑–∞–≥—Ä—É–∂–∞–µ—Ç –≤–µ—Å—å —Ñ–∞–π–ª –ë–î –≤ –ø–∞–º—è—Ç—å –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
- –ü—Ä–∏ >500 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å 10+ MB
- –ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å –≤ sql.js –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–∞

**–ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏:**

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install pg

# 2. –ü–æ–¥–Ω—è—Ç—å PostgreSQL (Docker)
docker run --name samoyed-db \
  -e POSTGRES_PASSWORD=secret \
  -e POSTGRES_DB=samoyed \
  -p 5432:5432 -d postgres:16-alpine
```

**–ù–æ–≤—ã–π database.js:**
```javascript
import pg from 'pg';
const pool = new pg.Pool({
  host: process.env.DB_HOST,
  database: 'samoyed',
  user: process.env.DB_USER,
  password: process.env.DB_PASSWORD,
  max: 10,
});

export async function logFeeding(userId, timestamp) {
  await pool.query(
    'INSERT INTO feedings (user_id, timestamp) VALUES ($1, $2)',
    [userId, timestamp]
  );
}
```

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** ~3 –¥–Ω—è —Ä–∞–±–æ—Ç—ã (–ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã, –º–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö)

#### Webhooks –≤–º–µ—Å—Ç–æ polling

**–ó–∞—á–µ–º:**
- Long polling –¥–µ—Ä–∂–∏—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å Telegram
- Webhooks = Telegram –ø—Ä–∏—Å—ã–ª–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è HTTP POST
- –ú–µ–Ω—å—à–µ –Ω–∞–≥—Ä—É–∑–∫–∞, –±—ã—Å—Ç—Ä–µ–µ –æ—Ç–≤–µ—Ç—ã

```javascript
// –í–º–µ—Å—Ç–æ bot.launch()
import express from 'express';
const app = express();

app.use(bot.webhookCallback('/telegram-webhook'));
app.listen(3000, () => {
  bot.telegram.setWebhook('https://your-domain.com/telegram-webhook');
});
```

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- –ü—É–±–ª–∏—á–Ω—ã–π –¥–æ–º–µ–Ω —Å HTTPS (Let's Encrypt)
- Nginx –¥–ª—è –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** ~1 –¥–µ–Ω—å + –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã

#### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (Sentry)

```bash
npm install @sentry/node
```

```javascript
import * as Sentry from '@sentry/node';

Sentry.init({ dsn: process.env.SENTRY_DSN });

bot.catch((err, ctx) => {
  Sentry.captureException(err, {
    user: { id: ctx.from?.id },
    extra: { update: ctx.update }
  });
});
```

**–°—Ç–æ–∏–º–æ—Å—Ç—å:** –ë–µ—Å–ø–ª–∞—Ç–Ω–æ –¥–æ 5K –æ—à–∏–±–æ–∫/–º–µ—Å—è—Ü

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ë—ã—Å—Ç—Ä—ã–π —Ä–æ—Å—Ç (2000+ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)

**–ö–æ–≥–¥–∞:** –í–∏—Ä—É—Å–Ω—ã–π —Ä–æ—Å—Ç, –Ω—É–∂–Ω–∞ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã:**
1. ‚úÖ **Redis** ‚Üí –¥–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ –∫–µ—à–∞
2. ‚úÖ **Bull** ‚Üí –æ—á–µ—Ä–µ–¥–∏ –¥–ª—è AI-–∑–∞–ø—Ä–æ—Å–æ–≤
3. ‚úÖ **TypeScript** ‚Üí –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø—Ä–∏ –±–æ–ª—å—à–æ–π –∫–æ–º–∞–Ω–¥–µ
4. ‚úÖ **Docker** ‚Üí –æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –≤–µ–∑–¥–µ
5. ‚úÖ **Kubernetes** ‚Üí –∞–≤—Ç–æ–º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ (–µ—Å–ª–∏ >10K)

#### Redis –¥–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏—è

**–ó–∞—á–µ–º:**
- –°–µ–π—á–∞—Å `userAiMode` —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ `Map` ‚Üí –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ —Ç–µ—Ä—è–µ—Ç—Å—è
- Redis = –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- –ü–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ –±–æ—Ç–∞

```javascript
import Redis from 'ioredis';
const redis = new Redis();

// –í–º–µ—Å—Ç–æ Map
export async function setAiMode(userId, mode) {
  await redis.setex(`ai:${userId}`, 3600, mode); // TTL 1 —á–∞—Å
}

export async function getAiMode(userId) {
  return await redis.get(`ai:${userId}`);
}
```

#### –û—á–µ—Ä–µ–¥–∏ –¥–ª—è AI (Bull)

**–ó–∞—á–µ–º:**
- –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏ GitHub Models API
- –ü—Ä–∏–æ—Ä–∏—Ç–µ–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ (emergency > normal)
- Retry –ª–æ–≥–∏–∫–∞ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

```javascript
import Queue from 'bull';
const aiQueue = new Queue('ai-requests', 'redis://localhost:6379');

// –î–æ–±–∞–≤–∏—Ç—å –≤ –æ—á–µ—Ä–µ–¥—å
aiQueue.add('ask', { userId, question, mode }, {
  priority: mode === 'emergency' ? 1 : 10,
  attempts: 3,
});

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫
aiQueue.process('ask', async (job) => {
  const { question, mode } = job.data;
  return await askExpert(question, mode);
});
```

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** ~2 –¥–Ω—è

---

## TypeScript: –ó–∞ –∏ –ü—Ä–æ—Ç–∏–≤

### ‚úÖ –ê—Ä–≥—É–º–µ–Ω—Ç—ã –ó–ê

**1. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Ç–∏–ø–æ–≤**
```typescript
// –î–æ (JavaScript)
function logWalk(userId, successful) {
  // –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å —á—Ç–æ —É–≥–æ–¥–Ω–æ, –æ—à–∏–±–∫–∞ —Ç–æ–ª—å–∫–æ –≤ runtime
}

// –ü–æ—Å–ª–µ (TypeScript)
function logWalk(userId: number, successful: boolean): Promise<void> {
  // –û—à–∏–±–∫–∞ –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
}
```

**2. –õ—É—á—à–∏–π autocomplete**
- IDE –ø–æ–Ω–∏–º–∞–µ—Ç —Ç–∏–ø—ã ‚Üí –º–µ–Ω—å—à–µ –æ—à–∏–±–æ–∫
- –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ

**3. –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–∏ –±–æ–ª—å—à–æ–π –∫–æ–º–∞–Ω–¥–µ**
- –ö–æ–¥ —Å–∞–º–æ–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è
- –ú–µ–Ω—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ code review

### ‚ùå –ê—Ä–≥—É–º–µ–Ω—Ç—ã –ü–†–û–¢–ò–í

**1. Overhead –¥–ª—è –º–∞–ª–µ–Ω—å–∫–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞**
- –§–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (tsconfig.json)
- –®–∞–≥ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ (tsc)
- –¢–∏–ø—ã –¥–ª—è –≤—Å–µ—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫ (@types/node)

**2. –ú–µ–¥–ª–µ–Ω–Ω–µ–µ –∏—Ç–µ—Ä–∞—Ü–∏–∏**
- –°–µ–π—á–∞—Å: –∏–∑–º–µ–Ω–∏–ª JS ‚Üí –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏–ª
- –° TS: –∏–∑–º–µ–Ω–∏–ª TS ‚Üí —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–ª ‚Üí –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏–ª

**3. –ù–µ —Ä–µ—à–∞–µ—Ç –±–∏–∑–Ω–µ—Å-–∑–∞–¥–∞—á–∏**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤—Å—ë —Ä–∞–≤–Ω–æ –Ω–∞ TypeScript
- –õ—É—á—à–µ –ø–æ—Ç—Ä–∞—Ç–∏—Ç—å –≤—Ä–µ–º—è –Ω–∞ –Ω–æ–≤—ã–µ —Ñ–∏—á–∏

### üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

**–ù–ï –ú–ò–ì–†–ò–†–û–í–ê–¢–¨ –Ω–∞ TypeScript, –ï–°–õ–ò:**
- –ö–æ–º–∞–Ω–¥–∞ = 1 —á–µ–ª–æ–≤–µ–∫
- –ö–æ–¥ –∞–∫—Ç–∏–≤–Ω–æ –º–µ–Ω—è–µ—Ç—Å—è (MVP —Ñ–∞–∑–∞)
- <1000 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞

**–ú–ò–ì–†–ò–†–û–í–ê–¢–¨ –Ω–∞ TypeScript, –ï–°–õ–ò:**
- –ö–æ–º–∞–Ω–¥–∞ ‚â•2 —á–µ–ª–æ–≤–µ–∫–∞
- –ö–æ–¥ —Å—Ç–∞–±–∏–ª—å–Ω—ã–π (–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —É—Å—Ç–æ—è–ª–∞—Å—å)
- –ú–Ω–æ–≥–æ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –ª–æ–≥–∏–∫–∏ (Promise chains)

**–ö–∞–∫ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å:**
1. –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å `.js` ‚Üí `.ts` –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ
2. –ù–∞—á–∞—Ç—å —Å `database.ts` (—á—ë—Ç–∫–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã)
3. –ü–æ—Ç–æ–º `training.ts` (—Ç–∏–ø—ã –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞)
4. –í –ø–æ—Å–ª–µ–¥–Ω—é—é –æ—á–µ—Ä–µ–¥—å `index.ts` (—Å–∞–º—ã–π —Å–ª–æ–∂–Ω—ã–π)

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ —Å–ª–æ–∏

**–°–µ–π—á–∞—Å:**
```
index.js ‚Üí database.js ‚Üí sql.js
```

**–ü–æ—Å–ª–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è:**
```
Presentation (index.js)
    ‚Üì
Business Logic (services/)
    ‚Üì
Data Access (repositories/)
    ‚Üì
Database (PostgreSQL)
```

**–ü—Ä–∏–º–µ—Ä:**
```javascript
// services/tracker.service.js
export class TrackerService {
  constructor(feedingRepo, walkRepo) {
    this.feedingRepo = feedingRepo;
    this.walkRepo = walkRepo;
  }
  
  async recordFeeding(userId) {
    const timestamp = Date.now();
    await this.feedingRepo.insert(userId, timestamp);
    // –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞: –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 4 —á–∞—Å–∞
    await scheduler.scheduleReminder(userId, timestamp + 4 * 3600000);
  }
}
```

### 2. –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã (—ç–∫—Å—Ç—Ä–∏–º)

**–ö–æ–≥–¥–∞:** >50K –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–ª–∏ –æ—á–µ–Ω—å —Ä–∞–∑–Ω—ã–µ –Ω–∞–≥—Ä—É–∑–∫–∏

```
Bot Service (Telegram)
    ‚Üì HTTP
AI Service (GPT-4)
    ‚Üì gRPC
Analytics Service (—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞)
    ‚Üì Queue
Notification Service (push, email)
```

**–ü–ª—é—Å—ã:**
- –ù–µ–∑–∞–≤–∏—Å–∏–º–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
- –†–∞–∑–Ω—ã–µ —è–∑—ã–∫–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

**–ú–∏–Ω—É—Å—ã:**
- –°–ª–æ–∂–Ω–æ—Å—Ç—å (Kubernetes, Service Mesh)
- Latency (—Å–µ—Ç–µ–≤—ã–µ –≤—ã–∑–æ–≤—ã)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–µ–ª–∞—Ç—å –¢–û–õ–¨–ö–û –µ—Å–ª–∏ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –Ω—É–∂–Ω–æ

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è: –Ω–µ—Ç —Ç–µ—Å—Ç–æ–≤

**–ü–æ—á–µ–º—É —Ç–∞–∫:**
- MVP —Ñ–∞–∑–∞
- –ö–æ–¥ –±—ã—Å—Ç—Ä–æ –º–µ–Ω—è–µ—Ç—Å—è
- –¢–µ—Å—Ç—ã –±—É–¥—É—Ç –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞—Ç—å—Å—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å

### –ö–æ–≥–¥–∞ –¥–æ–±–∞–≤–ª—è—Ç—å —Ç–µ—Å—Ç—ã

**–Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã:**
```javascript
// database.test.js
describe('logFeeding', () => {
  it('should insert feeding record', async () => {
    await logFeeding(123, 1700000000);
    const last = await getLastFeeding(123);
    expect(last.timestamp).toBe(1700000000);
  });
});
```

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã:**
```javascript
// bot.test.js
it('should respond to /start', async () => {
  const response = await sendMessage(bot, '/start');
  expect(response.text).toContain('Samoyed Mentor');
});
```

**E2E —Ç–µ—Å—Ç—ã:**
- Selenium –¥–ª—è –≤–µ–±-–≤–µ—Ä—Å–∏–∏ Telegram
- –°–ª–∏—à–∫–æ–º —Å–ª–æ–∂–Ω–æ –¥–ª—è –±–æ—Ç–∞, –ù–ï –ù–£–ñ–ù–´

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
- –î–æ–±–∞–≤–∏—Ç—å —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã –¥–ª—è `database.js` (–∫—Ä–∏—Ç–∏—á–Ω–∞—è –ª–æ–≥–∏–∫–∞)
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è AI (–º–æ–∫–∏)
- –ü–æ–∫—Ä—ã—Ç–∏–µ >80% –Ω–µ –Ω—É–∂–Ω–æ, —Ñ–æ–∫—É—Å –Ω–∞ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø—É—Ç—è—Ö

---

## Roadmap –º–∏–≥—Ä–∞—Ü–∏–∏

### –≠—Ç–∞–ø 1: –°—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è (1-2 –Ω–µ–¥–µ–ª–∏)
- [ ] PM2 –¥–ª—è –∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞
- [ ] –ë–∞–∑–æ–≤–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ñ–∞–π–ª
- [ ] Sentry –¥–ª—è –æ—à–∏–±–æ–∫
- [ ] .env.production –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω-–Ω–∞—Å—Ç—Ä–æ–µ–∫

### –≠—Ç–∞–ø 2: –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –ë–î (1 –Ω–µ–¥–µ–ª—è)
- [ ] Docker Compose (PostgreSQL + Redis)
- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è —Å sql.js –Ω–∞ PostgreSQL
- [ ] –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ —Ç–∞–±–ª–∏—Ü—ã (user_id)

### –≠—Ç–∞–ø 3: –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (1-2 –Ω–µ–¥–µ–ª–∏)
- [ ] Webhooks –≤–º–µ—Å—Ç–æ polling
- [ ] Nginx + Let's Encrypt (HTTPS)
- [ ] CI/CD (GitHub Actions)
- [ ] –î–µ–ø–ª–æ–π –Ω–∞ VPS (Hetzner / DigitalOcean)

### –≠—Ç–∞–ø 4: –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] Redis –¥–ª—è –∫–µ—à–∞ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- [ ] Bull –¥–ª—è –æ—á–µ—Ä–µ–¥–µ–π AI
- [ ] –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ (–Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤)

### –≠—Ç–∞–ø 5: –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ TypeScript
- [ ] –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã (Jest)
- [ ] ESLint + Prettier

---

## –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π

| –ú–µ—Ç—Ä–∏–∫–∞ | –ü–æ—Ä–æ–≥ | –î–µ–π—Å—Ç–≤–∏–µ |
|---------|-------|----------|
| –ê–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π | >500 | PostgreSQL |
| –ó–∞–ø—Ä–æ—Å–æ–≤ –≤ –¥–µ–Ω—å | >5000 | Webhooks |
| –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ –ë–î | >100ms | –ò–Ω–¥–µ–∫—Å—ã / –∫–µ—à |
| RAM –±–æ—Ç–∞ | >512MB | –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è / –±–æ–ª—å—à–µ –ø–∞–º—è—Ç–∏ |
| Downtime | >5% | PM2 + –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ |
| –†–∞–∑–º–µ—Ä –∫–æ–º–∞–Ω–¥—ã | ‚â•2 | TypeScript |
| AI –ª–∏–º–∏—Ç—ã | –†–µ–≥—É–ª—è—Ä–Ω–æ 429 | –û—á–µ—Ä–µ–¥—å + retry |

---

## –ò—Ç–æ–≥–æ: —á—Ç–æ –¥–µ–ª–∞—Ç—å –°–ï–ô–ß–ê–°

### üü¢ –°–¥–µ–ª–∞—Ç—å –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è:
1. **PM2** ‚Äî 1 —á–∞—Å —Ä–∞–±–æ—Ç—ã, –≤ 10 —Ä–∞–∑ –º–µ–Ω—å—à–µ –ø–∞–¥–µ–Ω–∏–π
2. **Sentry** ‚Äî 30 –º–∏–Ω—É—Ç, –≤–∏–¥–Ω—ã –≤—Å–µ –æ—à–∏–±–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
3. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî 1 —á–∞—Å, –ø–æ–Ω–∏–º–∞–µ–º, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç

### üü° –ü–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –±—É–¥—É—â–µ–µ:
1. **PostgreSQL** ‚Äî –∫–æ–≥–¥–∞ sql.js –Ω–∞—á–Ω—ë—Ç —Ç–æ—Ä–º–æ–∑–∏—Ç—å (>500 users)
2. **Webhooks** ‚Äî –∫–æ–≥–¥–∞ long polling —Å—Ç–∞–Ω–µ—Ç —É–∑–∫–∏–º –º–µ—Å—Ç–æ–º
3. **Docker** ‚Äî –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –¥–µ–ø–ª–æ–∏—Ç—å –Ω–∞ —Ä–∞–∑–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### üî¥ –ù–ï –¥–µ–ª–∞—Ç—å (–ø–æ–∫–∞):
1. **TypeScript** ‚Äî —Å–ª–∏—à–∫–æ–º —Ä–∞–Ω–æ, –∫–æ–¥ –∞–∫—Ç–∏–≤–Ω–æ –º–µ–Ω—è–µ—Ç—Å—è
2. **–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã** ‚Äî –º–æ–Ω–æ–ª–∏—Ç —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
3. **Kubernetes** ‚Äî overkill –¥–ª—è –æ–¥–Ω–æ–≥–æ –±–æ—Ç–∞

**–ü—Ä–∞–≤–∏–ª–æ:** –†–µ—à–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã –ø–æ –º–µ—Ä–µ –∏—Ö –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è, –Ω–µ —Ä–∞–Ω—å—à–µ.
